{"is_source_file": true, "format": "JavaScript", "description": "This file defines a weather client module for a React-based frontend application. It manages environment configurations, provides mock data for development/testing, and exposes functions to fetch current weather and forecast data from an external API with fallback mechanisms and error handling.", "external_files": ["fetch API (built-in, part of browser environment)"], "external_methods": ["fetch"], "published": ["getCurrentWeather", "getForecast", "getClientMeta"], "classes": [], "methods": [{"name": "getCurrentWeather(query)", "description": "Fetches current weather data for a specified query; falls back to mock data if the API is unreachable or not configured.", "scope": "", "scopeKind": ""}, {"name": "getForecast(query)", "description": "Fetches a 5-day weather forecast for a specified query; falls back to mock data if the API is unreachable or not configured.", "scope": "", "scopeKind": ""}, {"name": "getClientMeta()", "description": "Provides environment and feature flag metadata useful for debugging or feature toggles.", "scope": "", "scopeKind": ""}, {"name": "buildUrl(path, query)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "httpGet(path, query)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "makeHelpfulError(message, details = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "mockCurrent(safeQuery)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "mockForecast()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["buildUrl", "httpGet", "makeHelpfulError", "mockCurrent", "mockForecast"], "search-terms": ["weatherClient", "getCurrentWeather", "getForecast", "environment variables", "mock data fallback", "fetch API", "error handling", "React environment", "weather API endpoints"], "state": 2, "file_id": 15, "knowledge_revision": 56, "git_revision": "df5692ff4e3d556e8fcbdd9d271926ba5b9ff3f9", "revision_history": [{"31": ""}, {"56": "df5692ff4e3d556e8fcbdd9d271926ba5b9ff3f9"}], "ctags": [{"_type": "tag", "name": "ALLOW_MOCK_ON_ERROR", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const ALLOW_MOCK_ON_ERROR = String(process.env.REACT_APP_ALLOW_MOCK_ON_ERROR || 'true') === 'tru/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "BASE_URL", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const BASE_URL = RAW_BASE_URL ? String(RAW_BASE_URL).replace(\\/\\\\\\/+$\\/, '') : '';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "EXPERIMENTS", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const EXPERIMENTS = process.env.REACT_APP_EXPERIMENTS_ENABLED;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "FEATURE_FLAGS", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const FEATURE_FLAGS = process.env.REACT_APP_FEATURE_FLAGS;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "MOCK_CURRENT", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const MOCK_CURRENT = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "MOCK_FORECAST", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const MOCK_FORECAST = Array.from({ length: 5 }).map((_, i) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "NODE_ENV", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const NODE_ENV = process.env.REACT_APP_NODE_ENV;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "RAW_BASE_URL", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^const RAW_BASE_URL = process.env.REACT_APP_API_BASE;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^function buildUrl(path, query) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, query)"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  city: 'San Francisco',$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  condition: { code: 'partly-cloudy', label: 'Partly Cloudy', icon: 'cloud-sun' },$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT.condition", "scopeKind": "class"}, {"_type": "tag", "name": "condition", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  condition: { code: 'partly-cloudy', label: 'Partly Cloudy', icon: 'cloud-sun' },$/", "language": "JavaScript", "kind": "class", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "country", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  country: 'US',$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "datetime", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  datetime: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "feelsLike", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  feelsLike: 17,$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "getClientMeta", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^export function getClientMeta() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getCurrentWeather", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^export async function getCurrentWeather(query) {$/", "language": "JavaScript", "kind": "function", "signature": "(query)"}, {"_type": "tag", "name": "getForecast", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^export async function getForecast(query) {$/", "language": "JavaScript", "kind": "function", "signature": "(query)"}, {"_type": "tag", "name": "httpGet", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^async function httpGet(path, query) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, query)"}, {"_type": "tag", "name": "humidity", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  humidity: 72,$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "icon", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  condition: { code: 'partly-cloudy', label: 'Partly Cloudy', icon: 'cloud-sun' },$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT.condition", "scopeKind": "class"}, {"_type": "tag", "name": "label", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  condition: { code: 'partly-cloudy', label: 'Partly Cloudy', icon: 'cloud-sun' },$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT.condition", "scopeKind": "class"}, {"_type": "tag", "name": "makeHelpfulError", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^function makeHelpfulError(message, details = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(message, details = {})"}, {"_type": "tag", "name": "mockCurrent", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^function mockCurrent(safeQuery) {$/", "language": "JavaScript", "kind": "function", "signature": "(safeQuery)"}, {"_type": "tag", "name": "mockForecast", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^function mockForecast() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "temp", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  temp: 18,$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "visibilityKm", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  visibilityKm: 10,$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}, {"_type": "tag", "name": "windKph", "path": "/home/kavia/workspace/code-generation/weather-dashboard-223329-223338/weather_dashboard_frontend/src/services/weatherClient.js", "pattern": "/^  windKph: 14,$/", "language": "JavaScript", "kind": "property", "scope": "MOCK_CURRENT", "scopeKind": "class"}], "hash": "79778b5934915d718940401a5b5eac0e", "format-version": 4, "code-base-name": "weather_dashboard_frontend", "filename": "weather_dashboard_frontend/src/services/weatherClient.js", "fields": [{"name": "city: 'San Francisco',", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "condition: { code: 'partly-cloudy', label: 'Partly Cloudy', icon: 'cloud-sun' },", "scope": "MOCK_CURRENT.condition", "scopeKind": "class", "description": "unavailable"}, {"name": "country: 'US',", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime: new Date().toISOString(),", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "feelsLike: 17,", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "humidity: 72,", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "temp: 18,", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "visibilityKm: 10,", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}, {"name": "windKph: 14,", "scope": "MOCK_CURRENT", "scopeKind": "class", "description": "unavailable"}]}